## Sub Chart Name - pharia-kernel
## Sub Chart Version - 0.2.65
## Release Date - 2025-06-17

### Description of Changes:

Here is a summary of the changes introduced in this version:\n\nThis version includes a range of improvements and bug fixes. Error messages have been enhanced with target and context information, and error logging has been improved. The lock file has been regenerated, and several fixes have been made to prevent blocking of message queues and to improve tool updates. The server store can now report who is next in line for refresh, and the MCP actor has been updated to keep an up-to-date tool list and inform the tool runtime. Additionally, several refactorings have been made to improve code organization and readability, and several tests have been added or updated to ensure the correctness of the code.

### Added

- Add target and context to error messages
- Add module docstring for mcp actor
- Add MCP actor messages
- Add MCP actor

### Changed

- Release v0.13.0
- Improve error logging
- Regenerate lock file with duplicate wasmparser
- Server store can report who is next in line for refresh
- Introduce last checked member of cached tools
- Specify purpose of tool actor module
- Update docstrings and fix typos
- Update docstring for tool trait and move to top of module
- Update comment for native tools
- Formatting
- Toolbox fetch is sync again
- Formatting
- Clear up visibility of symbols in mcp
- Use reported tools to list tools rather than the ones in the mcp store of tool runtime
- Cached mcp servers are used in tool invocations
- Formatting
- Mcp Actor keeps an up to date tool list and informs tool runtime
- Allow passing check interval in MCP constructor
- Introduce check interval
- Report tool changes to ToolRuntimeActor
- Report updated tool lists on server upsert and remove
- Report updated tools then upserting or removing servers.
- Introduce new member Toolbox::mcp_tools
- Introduce report updated tools
- Use a list of all tools by qualified name to fetch a tool
- Fetch uses qualified tool name now
- Use QualifiedToolName in ToolMsg
- Removed invoke_tool_legacy
- Introduce QualifiedToolName
- Move McpTool to mcp module
- Mcp Actor now receives a sender to the tool runtime
- Tool execution now works with &self again
- Remove dead code around delayed mcp server resoultion
- Use immediatly availade tool description to invoke tools, rather than relying on deferred resolution of the server
- McpTool know holds an mcp Tool description
- Update tool list before each call to fetch
- Introduce McpStore::update_tool_list
- McpStore updates tool list on upsert
- Pass client to McpStore upsert
- Add client to Mcp Actor
- Upsert_mcp_server is now async.
- Introduce member to keep track of tools in McpServerStore
- Remove allow dead code
- Rename ToolClient -> McpClient, McpClient -> McpClientImpl
- Move module client to mcp
- Bump the minor group with 15 updates
- Formatting
- Group use statements
- Remove list route from tools store api and move tests to mcp
- Call mcp actor to list servers in shell, rather than tool actor
- Connect Mcp Actor with Namespace Watcher
- Group use statements
- Move McpServerStore into a module
- Use Toolbox implementation
- Make Toolbox::fetch_tool() synchronous
- Convert McpServerStore to a struct
- Find tool from configured MCP Servers
- Make Toolbox::fetch_tool async
- Bubble up MCP Url from McpTool to Toolbox
- Print causes for error fetching namespace description
- Invoke_tool now takes name and argument separately
- Add name to McpTool
- Introduce Toolbox and rename ToolRuntime
- Remove underscore binding
- Silence warning about unused self
- Introduce NativeToolStore
- Move default implementations for native tool deltas to impl
- Namespace Watcher now reports changes in Native tool configuration
- Formatting
- Allow configuring native_tools, no computing of diffs yet
- Bump the minor group across 1 directory with 12 updates
- AppStateImpl -> AppStateDouble
- Introduce ShellState AppStateImpl is now private
- Log invalid input

### Fixed

- Only schedule special tool update if server is new
- Do not block message queue of mcp actor
- Background tool update does not block actor from answering messages
- Mcp actor processes messages non-blocking
- Fix doc string on ToolStoreApi
- Fix pedantic clippy lints
- Fix clippy lints
- Move test OneGoodOneBad to mcp
- Improve test tools_are_updated_regularly
- Increase timeout to 2 ms change_digest_if_file_is_modified
- Fix lints
- Implement act method for MCP actor messages
- Move Saboteur Stream test to Skill Runtime routes tests

### Removed

- Remove underscore binding
- Remove beta flag from configuration parsing

### Related Issues/Links:
- [Jira Board](https://aleph-alpha.atlassian.net/jira/software/projects/PK/boards/160)

### Notes:
- Generated by git-cliff
- The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),
and this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).
