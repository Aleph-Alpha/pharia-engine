## Sub Chart Name - pharia-kernel
## Sub Chart Version - 0.2.60
## Release Date - 2025-06-05

### Description of Changes:

This version introduces several key changes to the pharia-kernel. The main focus is on refactoring the code to make it more modular and maintainable. This includes introducing an `AppState` trait that allows for the fetching of various state objects, such as `SkillRuntime`, `CSI`, and `McpServerStore`. The code also includes several tests to ensure that the changes do not break existing functionality. Additionally, there are some minor style and build-related changes, including the removal of dead code and the update of non-breaking dependencies.

### Added

- Add rust cache for macOS build

### Changed

- Release v0.12.13
- Pass AppState in Shell constructor
- Make registering of http routes generic over AppState
- Fetch AuthorizationState from AppState trait
- Fetch CSI and McpServerStore from AppState trait
- Fetch SkillStore from AppState trait
- Introduce AppState trait and allow fetching SkillRuntime from it
- Allow too many arguments for shell constructor for now
- Remove SkillStoreDummy
- Replace RawCsiDummy with Dummy
- Use actual app state to list MCP servers, test outstanding.
- Register route for listing mcp servers as beta
- Replace double_derive with double_trait
- Forward contextual CSI to run as function
- Run as message stream takes contextual csi
- Skill invocation context owns a contextual csi
- Move tracing context to invocation context
- Move api token to invocation context
- Move namespace into invocation context
- Introduce ContextualCsi
- Rename test structs for RawCsi
- Separate into csi::raw module
- Rename trait as Csi
- Rename trait as RawCsi
- Assert project builds on macOS
- Update non-breaking dependencies
- Bump aquasecurity/trivy-action from 0.30.0 to 0.31.0

### Fixed

- Realistic test assertion for listing mcp servers
- Test that namespace is forwarded
- Fix test expectations for list mcp servers by namespace
- Use provided double implementation for double traits
- Simplify test assertion by unwrapping on option
- Simplify SkillStoreStub creation
- Implement double trait for SkillStoreStub
- Implement double trait for SkillStoreDummy
- Implement SkillDouble instead of Skill
- Rename RawCsiDouble to CompletionStub
- Make chat stream stub logic more readable
- Move RawCsiSaboteur to the test that uses it
- Supress stdout and stderr from spawend test helpers

### Removed

- Remove dead code allowance
- Remove responsibility for listing cached skills from SkillStoreStub
- Remove listing responsibility from SkillStoreStub
- Remove unneeded methods by using double trait
- Remove complete_stream from InferenceStub
- Remove ChatStream responsibility from InferenceStub
- Remove completion stream functionality from RawCsiDummy
- Remove with chat functionality on RawCsiDummy
- Remove chat implementation on RawCsiDouble
- Remove unused select language method on RawStubCsi
- Remove with explain from RawCsiStub
- Remove set chunking from RawCsiDummy
- Remove unused complete implementation of RawCsiSaboteur

### Related Issues/Links:
- [Jira Board](https://aleph-alpha.atlassian.net/jira/software/projects/PK/boards/160)

### Notes:
- Generated by git-cliff
- The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),
and this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).
